import{a as v}from"./7e2b3593.js";import{r as t,S as h,a as S,R}from"./index.82c951e8.js";import{M as y}from"./68abae6d.js";function M(){const e=t.exports.useContext(h);return e?{serverProps:e.serverProps,setServerProps:e.setServerProps,pending:e.pending}:{}}function C(){var e;return(e=t.exports.useContext(h))!==null&&e!==void 0?e:{}}const p=t.exports.createContext({});let l=!0;const d={},P=({history:e,children:n})=>{const r=t.exports.useMemo(()=>e||v(),[e]),[o,s]=t.exports.useState(r.location),[u,a]=t.exports.useState(!1),{pending:i,locationServerProps:m,setLocationServerProps:f}=C();return _({location:o,pending:i,serverProps:m,locationChanged:u,onFinishNavigating:()=>a(!1)}),t.exports.useLayoutEffect(()=>{const w=r.listen(({location:c})=>{d[o.key]=window.scrollY,f({pathname:c.pathname,search:c.search}),s(c),a(!0)});return()=>w()},[r,o,a,s,f]),S(p.Provider,{value:{history:r,location:o},children:n})};function x(){const e=t.exports.useContext(p);if(!e&&y)throw new Error("useRouter must be used within a <Router> component");return e}function E(){return x().location}function L(e){R.useEffect(()=>(window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}),[e])}function _({location:e,pending:n,serverProps:r,locationChanged:o,onFinishNavigating:s}){t.exports.useEffect(()=>{window.history.scrollRestoration="manual"},[]),L(t.exports.useCallback(()=>{window.history.scrollRestoration="auto"},[])),t.exports.useLayoutEffect(()=>{if(l||!o){l=!1;return}const u=d[e.key];if(!n&&e.pathname===r.pathname&&e.search===r.search){if(e.hash){const i=document.querySelector(e.hash);if(i){i.scrollIntoView(),s();return}}if(u){window.scrollTo(0,u),s();return}window.scrollTo(0,0),s()}},[e.pathname,e.search,e.hash,e.key,n,r.pathname,r.search,o,s])}var T=Object.freeze(Object.defineProperty({__proto__:null,RouterContext:p,BrowserRouter:P,useRouter:x,useLocation:E},Symbol.toStringTag,{value:"Module"}));export{T as B,C as a,M as b,E as c,x as u};
//# sourceMappingURL=bc08dc6e.js.map
