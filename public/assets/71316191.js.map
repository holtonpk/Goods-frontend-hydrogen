{"version":3,"file":"71316191.js","sources":["../../../node_modules/@shopify/hydrogen/dist/esnext/utilities/image_size.js","../../../node_modules/@shopify/hydrogen/dist/esnext/components/Image/Image.js"],"sourcesContent":["import * as React from 'react';\n// TODO: Are there other CDNs missing from here?\nconst PRODUCTION_CDN_HOSTNAMES = [\n    'cdn.shopify.com',\n    'cdn.shopifycdn.net',\n    'shopify-assets.shopifycdn.com',\n    'shopify-assets.shopifycdn.net',\n];\nconst LOCAL_CDN_HOSTNAMES = ['spin.dev'];\n/**\n * Adds image size parameters to an image URL hosted by Shopify's CDN\n */\nexport function addImageSizeParametersToUrl(url, { width, height, crop, scale, format }) {\n    const newUrl = new URL(url);\n    const sizePath = width || height ? `_${width !== null && width !== void 0 ? width : ''}x${height !== null && height !== void 0 ? height : ''}` : '';\n    const cropPath = crop ? `_crop_${crop}` : '';\n    const scalePath = scale ? `@${scale}x` : '';\n    const progressive = format === 'pjpg' ? `.progressive` : '';\n    const asJPG = format === 'jpg' ? `.jpg` : '';\n    // We assume here that the last `.` is the delimiter\n    // between the file name and the file type\n    const fileDelimiterIndex = newUrl.pathname.lastIndexOf('.');\n    const fileName = newUrl.pathname.substr(0, fileDelimiterIndex);\n    const fileType = newUrl.pathname.substr(fileDelimiterIndex);\n    newUrl.pathname = `${fileName}${sizePath}${cropPath}${scalePath}${progressive}${fileType}${asJPG}`;\n    return newUrl.toString();\n}\nexport function shopifyImageLoader({ src, options }) {\n    const newSrc = new URL(src);\n    const allowedCDNHostnames = PRODUCTION_CDN_HOSTNAMES.concat(LOCAL_CDN_HOSTNAMES);\n    const isShopifyServedImage = allowedCDNHostnames.some((allowedHostname) => newSrc.hostname.endsWith(allowedHostname));\n    if (!isShopifyServedImage ||\n        options == null ||\n        (!options.width &&\n            !options.height &&\n            !options.crop &&\n            !options.scale &&\n            !options.format)) {\n        return src;\n    }\n    return addImageSizeParametersToUrl(src, options);\n}\nexport function useImageUrl(src, options) {\n    return React.useMemo(() => {\n        return src ? shopifyImageLoader({ src, options }) : src;\n    }, [options, src]);\n}\nexport function getShopifyImageDimensions(image, options) {\n    // Storefront API could return null dimension values for images that are not hosted on Shopify CDN\n    // The API dimensions references the image's intrinstic/natural dimensions and provides image aspect ratio information\n    const apiWidth = image.width;\n    const apiHeight = image.height;\n    if (apiWidth && apiHeight && ((options === null || options === void 0 ? void 0 : options.width) || (options === null || options === void 0 ? void 0 : options.height))) {\n        const optionWidth = (options === null || options === void 0 ? void 0 : options.width)\n            ? parseInt(options.width, 10)\n            : undefined;\n        const optionHeight = (options === null || options === void 0 ? void 0 : options.height)\n            ? parseInt(options.height, 10)\n            : undefined;\n        // Use option defined width & height\n        if (optionWidth && optionHeight) {\n            return { width: optionWidth, height: optionHeight };\n        }\n        // Calculate width from aspect ratio\n        if (!optionWidth && optionHeight) {\n            return {\n                width: Math.round((apiWidth / apiHeight) * optionHeight),\n                height: optionHeight,\n            };\n        }\n        // Calculate height from aspect ratio\n        if (optionWidth && !optionHeight) {\n            return {\n                width: optionWidth,\n                height: Math.round((apiHeight / apiWidth) * optionWidth),\n            };\n        }\n    }\n    return { width: apiWidth, height: apiHeight };\n}\n","import React from 'react';\nimport { shopifyImageLoader, getShopifyImageDimensions, } from '../../utilities';\n/**\n * The `Image` component renders an image for the Storefront API's\n * [Image object](https://shopify.dev/api/storefront/reference/common-objects/image).\n */\nexport function Image(props) {\n    var _a, _b, _c, _d;\n    const { data, options, src, id, alt, width, height, loader, loaderOptions, priority, ...passthroughProps } = props;\n    if (!data && !src) {\n        throw new Error('Image component: requires either an `data` or `src` prop.');\n    }\n    if (!data && src && (!width || !height)) {\n        throw new Error(`Image component: when 'src' is provided, 'width' and 'height' are required and needs to be valid values (i.e. greater than zero). Provided values: 'src': ${src}, 'width': ${width}, 'height': ${height}`);\n    }\n    const imgProps = data\n        ? convertShopifyImageData({\n            data,\n            options,\n            loader,\n            loaderOptions,\n            id,\n            alt,\n            priority,\n        })\n        : {\n            src,\n            id,\n            alt,\n            width,\n            height,\n            loader,\n            priority,\n            loaderOptions: { width, height, ...loaderOptions },\n        };\n    const srcPath = imgProps.loader\n        ? imgProps.loader({ src: imgProps.src, options: imgProps.loaderOptions })\n        : imgProps.src;\n    /* eslint-disable hydrogen/prefer-image-component */\n    return (React.createElement(\"img\", { id: (_a = imgProps.id) !== null && _a !== void 0 ? _a : '', loading: imgProps.priority ? 'eager' : 'lazy', alt: (_b = imgProps.alt) !== null && _b !== void 0 ? _b : '', ...passthroughProps, src: srcPath, width: (_c = imgProps.width) !== null && _c !== void 0 ? _c : undefined, height: (_d = imgProps.height) !== null && _d !== void 0 ? _d : undefined }));\n    /* eslint-enable hydrogen/prefer-image-component */\n}\nfunction convertShopifyImageData({ data, options, loader, priority, loaderOptions, id: propId, alt, }) {\n    const { url: src, altText, id } = data;\n    if (!src) {\n        throw new Error(`<Image/> requires 'data.url' when using the 'data' prop`);\n    }\n    const { width, height } = getShopifyImageDimensions(data, options);\n    return {\n        src,\n        id: propId ? propId : id,\n        alt: alt ? alt : altText,\n        width,\n        height,\n        loader: loader ? loader : shopifyImageLoader,\n        loaderOptions: { ...options, ...loaderOptions },\n        priority,\n    };\n}\n"],"names":["React.useMemo"],"mappings":"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"}